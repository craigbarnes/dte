# This config file uses the "ft" command to associate file types with an
# identifer. This identifier is then used to decide which syntax
# highlighter and local options to use when opening files.

# "ft -f" uses a regular expression to match the filename
ft -f config '^/boot/grub/menu\.lst$|/\.?git/?attributes$|^/etc/(hosts|fstab)$'
ft -f dte '/\.?dte/(config/)?(rc|filetype|((syntax|color|binding|compiler)/.*))$'
ft -f ini '/\.git/config$|^/etc/systemd/.+\.conf$|^/etc/krb5\.conf$'
ft -f mail '/tmpmsg-.*\.txt$|pico\.[0-9]+|mutt(ng)?-*-\w+|mutt[a-zA-Z0-9_-]{6}'
ft -f nginx '^/etc/nginx/'
ft -f sh '^/etc/default/|^/etc/profile$|(\.|/)bash(rc|_profile|_logout)$'

# "ft -c" uses a regular expression to match the first line of the file
ft -c html '^<!(doctype|DOCTYPE) (html|HTML)(>$| )'
ft -c ini '^\[wrap-file\]$'
ft -c roff '^\.TH [A-Z0-9]'
ft -c sh '^#.* shell-script'
ft -c xml '^<\?xml( |$)'

# The "option" command sets default local options for specific file types

# Don't remember cursor position for git temporary files
option gitcommit,gitrebase file-history false
option -r '/\.git/.*\.diff$' file-history false

# Try to detect indent settings based on existing file contents
option c,css,d,java,javascript,lua,nginx,php,sh,vala detect-indent 2,4,8

# Scan for braces to determine next auto-ident size
option c,css,d,go,java,javascript,lua,nginx,php,sh,vala brace-indent true

# Override indent options for Makefiles, since they almost always require tabs
option make indent-width 8 expand-tab false emulate-tab false

# Patterns used to detect indent size when "auto-indent" option is enabled
option c indent-regex '^[ \t]*(case|default|do|else|for|if|while)\b'
option java indent-regex '^[ \t]*(case|default|do|else|for|if|while)\b'
option lua indent-regex '(then|do|repeat|else) *$|function *[A-Za-z0-9_.:]* *\([A-Za-z0-9_, ]*\) *$'
option php indent-regex '^[ \t]*(case|default|do|else|for|foreach|if|while)\b'
option python indent-regex ':[ \t]*(#.*)?$'
option sh indent-regex '(^|;)[ \t]*(do|else|then)\b'

# Don't highlight whitespace errors in diff and mail files
option diff,mail ws-error 0
